import{g as _,j as k,r as l,q as S,s as P,c as o,a as s,m as b,v as g,k as h,t as p,l as U,n as F,o as r}from"./DQwChrcD.js";import{u as q}from"./2qLusjlS.js";const V={class:"max-w-3xl mx-auto py-10 px-4"},A={key:0,class:"text-gray-500"},B={key:1},C={class:"flex items-center space-x-4"},E=["disabled"],M={key:0,class:"text-green-600 text-sm"},N={key:1,class:"text-red-600 text-sm"},T=_({__name:"profile",async setup(D){var x;let u,f;const v=k();F();const i=l(""),n=l(""),y=l(!0),d=l(!1),m=l(""),t=l("");try{const{data:a,error:e}=([u,f]=S(()=>q("/api/user/me",{credentials:"include",headers:P(["cookie"])},"$y78J4zF_Ll")),u=await u,f(),u);e.value?t.value="Failed to load user profile":(x=a.value)!=null&&x.user&&(i.value=a.value.user.username||"",n.value=a.value.user.email||"")}catch{t.value="Something went wrong loading profile."}finally{y.value=!1}async function w(){var a;d.value=!0,m.value="",t.value="";try{(await $fetch("/api/user/update",{method:"POST",body:{userId:(a=v.user)==null?void 0:a.id,name:i.value,email:n.value}})).success?(m.value="Profile updated successfully.",await v.fetchUser()):t.value="Failed to update profile."}catch{t.value="Update failed. Please try again."}finally{d.value=!1}}return(a,e)=>(r(),o("div",V,[e[4]||(e[4]=s("h1",{class:"text-3xl font-semibold text-gray-800 mb-6"},"User Profile",-1)),e[5]||(e[5]=s("p",{class:"mb-8 text-gray-600"},"Manage your personal profile information below.",-1)),y.value?(r(),o("div",A,"Loading...")):(r(),o("div",B,[s("form",{onSubmit:U(w,["prevent"]),class:"space-y-6"},[s("div",null,[e[2]||(e[2]=s("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Full Name",-1)),b(s("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=c=>i.value=c),type:"text",required:"",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm px-4 py-2 focus:ring focus:ring-blue-200"},null,512),[[g,i.value]])]),s("div",null,[e[3]||(e[3]=s("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email Address",-1)),b(s("input",{id:"email","onUpdate:modelValue":e[1]||(e[1]=c=>n.value=c),type:"email",required:"",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm px-4 py-2 focus:ring focus:ring-blue-200"},null,512),[[g,n.value]])]),s("div",C,[s("button",{type:"submit",disabled:d.value,class:"bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded-md shadow transition"},p(d.value?"Saving...":"Update Profile"),9,E),m.value?(r(),o("span",M,p(m.value),1)):h("",!0),t.value?(r(),o("span",N,p(t.value),1)):h("",!0)])],32)]))]))}});export{T as default};
