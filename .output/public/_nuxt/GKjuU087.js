var z=t=>{throw TypeError(t)};var L=(t,i,r)=>i.has(t)||z("Cannot "+r);var b=(t,i,r)=>(L(t,i,"read from private field"),r?r.call(t):i.get(t)),T=(t,i,r)=>i.has(t)?z("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(t):i.set(t,r);import{p as F,r as k,q as C,s as R,x as M,y as P,z as V,g as q,c as p,a as h,A as x,t as v,j as I,F as H,B as J,o as y}from"./DH2D_Orl.js";function _(t){return typeof t=="string"?`'${t}'`:new X().serialize(t)}const X=function(){var i;class t{constructor(){T(this,i,new Map)}compare(e,n){const s=typeof e,o=typeof n;return s==="string"&&o==="string"?e.localeCompare(n):s==="number"&&o==="number"?e-n:String.prototype.localeCompare.call(this.serialize(e,!0),this.serialize(n,!0))}serialize(e,n){if(e===null)return"null";switch(typeof e){case"string":return n?e:`'${e}'`;case"bigint":return`${e}n`;case"object":return this.$object(e);case"function":return this.$function(e)}return String(e)}serializeObject(e){const n=Object.prototype.toString.call(e);if(n!=="[object Object]")return this.serializeBuiltInType(n.length<10?`unknown:${n}`:n.slice(8,-1),e);const s=e.constructor,o=s===Object||s===void 0?"":s.name;if(o!==""&&globalThis[o]===s)return this.serializeBuiltInType(o,e);if(typeof e.toJSON=="function"){const a=e.toJSON();return o+(a!==null&&typeof a=="object"?this.$object(a):`(${this.serialize(a)})`)}return this.serializeObjectEntries(o,Object.entries(e))}serializeBuiltInType(e,n){const s=this["$"+e];if(s)return s.call(this,n);if(typeof(n==null?void 0:n.entries)=="function")return this.serializeObjectEntries(e,n.entries());throw new Error(`Cannot serialize ${e}`)}serializeObjectEntries(e,n){const s=Array.from(n).sort((a,c)=>this.compare(a[0],c[0]));let o=`${e}{`;for(let a=0;a<s.length;a++){const[c,u]=s[a];o+=`${this.serialize(c,!0)}:${this.serialize(u)}`,a<s.length-1&&(o+=",")}return o+"}"}$object(e){let n=b(this,i).get(e);return n===void 0&&(b(this,i).set(e,`#${b(this,i).size}`),n=this.serializeObject(e),b(this,i).set(e,n)),n}$function(e){const n=Function.prototype.toString.call(e);return n.slice(-15)==="[native code] }"?`${e.name||""}()[native]`:`${e.name}(${e.length})${n.replace(/\s*\n\s*/g,"")}`}$Array(e){let n="[";for(let s=0;s<e.length;s++)n+=this.serialize(e[s]),s<e.length-1&&(n+=",");return n+"]"}$Date(e){try{return`Date(${e.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(e){return`ArrayBuffer[${new Uint8Array(e).join(",")}]`}$Set(e){return`Set${this.$Array(Array.from(e).sort((n,s)=>this.compare(n,s)))}`}$Map(e){return this.serializeObjectEntries("Map",e.entries())}}i=new WeakMap;for(const r of["Error","RegExp","URL"])t.prototype["$"+r]=function(e){return`${r}(${e})`};for(const r of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])t.prototype["$"+r]=function(e){return`${r}[${e.join(",")}]`};for(const r of["BigInt64Array","BigUint64Array"])t.prototype["$"+r]=function(e){return`${r}[${e.join("n,")}${e.length>0?"n":""}]`};return t}();function Y(t,i){return t===i||_(t)===_(i)}function G(t,i){if(typeof t!="string")throw new TypeError("argument str must be a string");const r={},e=i||{},n=e.decode||K;let s=0;for(;s<t.length;){const o=t.indexOf("=",s);if(o===-1)break;let a=t.indexOf(";",s);if(a===-1)a=t.length;else if(a<o){s=t.lastIndexOf(";",o-1)+1;continue}const c=t.slice(s,o).trim();if(e!=null&&e.filter&&!(e!=null&&e.filter(c))){s=a+1;continue}if(r[c]===void 0){let u=t.slice(o+1,a).trim();u.codePointAt(0)===34&&(u=u.slice(1,-1)),r[c]=Q(u,n)}s=a+1}return r}function K(t){return t.includes("%")?decodeURIComponent(t):t}function Q(t,i){try{return i(t)}catch{return t}}const S=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function D(t,i,r){const e=r||{},n=e.encode||encodeURIComponent;if(typeof n!="function")throw new TypeError("option encode is invalid");if(!S.test(t))throw new TypeError("argument name is invalid");const s=n(i);if(s&&!S.test(s))throw new TypeError("argument val is invalid");let o=t+"="+s;if(e.maxAge!==void 0&&e.maxAge!==null){const a=e.maxAge-0;if(Number.isNaN(a)||!Number.isFinite(a))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(a)}if(e.domain){if(!S.test(e.domain))throw new TypeError("option domain is invalid");o+="; Domain="+e.domain}if(e.path){if(!S.test(e.path))throw new TypeError("option path is invalid");o+="; Path="+e.path}if(e.expires){if(!W(e.expires)||Number.isNaN(e.expires.valueOf()))throw new TypeError("option expires is invalid");o+="; Expires="+e.expires.toUTCString()}if(e.httpOnly&&(o+="; HttpOnly"),e.secure&&(o+="; Secure"),e.priority)switch(typeof e.priority=="string"?e.priority.toLowerCase():e.priority){case"low":{o+="; Priority=Low";break}case"medium":{o+="; Priority=Medium";break}case"high":{o+="; Priority=High";break}default:throw new TypeError("option priority is invalid")}if(e.sameSite)switch(typeof e.sameSite=="string"?e.sameSite.toLowerCase():e.sameSite){case!0:{o+="; SameSite=Strict";break}case"lax":{o+="; SameSite=Lax";break}case"strict":{o+="; SameSite=Strict";break}case"none":{o+="; SameSite=None";break}default:throw new TypeError("option sameSite is invalid")}return e.partitioned&&(o+="; Partitioned"),o}function W(t){return Object.prototype.toString.call(t)==="[object Date]"||t instanceof Date}function f(t){if(typeof t!="object")return t;var i,r,e=Object.prototype.toString.call(t);if(e==="[object Object]"){if(t.constructor!==Object&&typeof t.constructor=="function"){r=new t.constructor;for(i in t)t.hasOwnProperty(i)&&r[i]!==t[i]&&(r[i]=f(t[i]))}else{r={};for(i in t)i==="__proto__"?Object.defineProperty(r,i,{value:f(t[i]),configurable:!0,enumerable:!0,writable:!0}):r[i]=f(t[i])}return r}if(e==="[object Array]"){for(i=t.length,r=Array(i);i--;)r[i]=f(t[i]);return r}return e==="[object Set]"?(r=new Set,t.forEach(function(n){r.add(f(n))}),r):e==="[object Map]"?(r=new Map,t.forEach(function(n,s){r.set(f(s),f(n))}),r):e==="[object Date]"?new Date(+t):e==="[object RegExp]"?(r=new RegExp(t.source,t.flags),r.lastIndex=t.lastIndex,r):e==="[object DataView]"?new t.constructor(f(t.buffer)):e==="[object ArrayBuffer]"?t.slice(0):e.slice(-6)==="Array]"?new t.constructor(t):t}const Z={path:"/",watch:!0,decode:t=>F(decodeURIComponent(t)),encode:t=>encodeURIComponent(typeof t=="string"?t:JSON.stringify(t))},A=window.cookieStore;function ee(t,i){var u;const r={...Z,...i};r.filter??(r.filter=l=>l===t);const e=U(r)||{};let n;r.maxAge!==void 0?n=r.maxAge*1e3:r.expires&&(n=r.expires.getTime()-Date.now());const s=n!==void 0&&n<=0,o=s||e[t]===void 0||e[t]===null,a=f(s?void 0:e[t]??((u=r.default)==null?void 0:u.call(r))),c=n&&!s?ie(a,n,r.watch&&r.watch!=="shallow"):k(a);{let l=null;try{!A&&typeof BroadcastChannel<"u"&&(l=new BroadcastChannel(`nuxt:cookies:${t}`))}catch{}const m=(d=!1)=>{!d&&(r.readonly||Y(c.value,e[t]))||(re(t,c.value,r),e[t]=f(c.value),l==null||l.postMessage({value:r.encode(c.value)}))},j=d=>{var w;const g=d.refresh?(w=U(r))==null?void 0:w[t]:r.decode(d.value);$=!0,c.value=g,e[t]=f(g),V(()=>{$=!1})};let $=!1;const O=!!M();if(O&&C(()=>{$=!0,m(),l==null||l.close()}),A){const d=g=>{const w=g.changed.find(E=>E.name===t),N=g.deleted.find(E=>E.name===t);w&&j({value:w.value}),N&&j({value:null})};A.addEventListener("change",d),O&&C(()=>A.removeEventListener("change",d))}else l&&(l.onmessage=({data:d})=>j(d));r.watch&&R(c,()=>{$||m()},{deep:r.watch!=="shallow"}),o&&m(o)}return c}function U(t={}){return G(document.cookie,t)}function te(t,i,r={}){return i==null?D(t,i,{...r,maxAge:-1}):D(t,i,r)}function re(t,i,r={}){document.cookie=te(t,i,r)}const B=2147483647;function ie(t,i,r){let e,n,s=0;const o=r?k(t):{value:t};return M()&&C(()=>{n==null||n(),clearTimeout(e)}),P((a,c)=>{r&&(n=R(o,c));function u(){s=0,clearTimeout(e);const l=i-s,m=l<B?l:B;e=setTimeout(()=>{if(s+=m,s<i)return u();o.value=void 0,c()},m)}return{get(){return a(),o.value},set(l){u(),o.value=l,c()}}})}const ne={class:"p-8"},oe={key:0},se={key:1},ae={class:"bg-white p-6 rounded shadow-md"},ce={key:0},le={key:1,class:"text-red-500 mt-4"},de={__name:"index",setup(t){const i=q(),r=k([]),e=k(""),n=async()=>{e.value="";try{const s=await $fetch("/api/user",{headers:{Authorization:`Bearer ${ee("auth_token").value}`}});r.value=s.users}catch(s){e.value=s.statusMessage||"Failed to fetch users."}};return(s,o)=>(y(),p("div",ne,[o[2]||(o[2]=h("h1",{class:"text-3xl font-bold mb-6"},"Admin Dashboard",-1)),x(i).user?(y(),p("p",oe," Welcome, "+v(x(i).user.name)+" (Admin)! ",1)):(y(),p("p",se,"Loading admin data...")),o[3]||(o[3]=h("h2",{class:"text-xl font-bold mt-8 mb-4"},"Manage Users (Example)",-1)),h("div",ae,[o[1]||(o[1]=h("p",null,"This is highly restricted content only for users with the 'admin' role.",-1)),h("button",{onClick:n,class:"mt-4 bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded"},"Fetch All Users"),r.value.length?(y(),p("div",ce,[o[0]||(o[0]=h("h3",{class:"text-lg font-semibold mt-4"},"All Users:",-1)),h("ul",null,[(y(!0),p(H,null,J(r.value,a=>(y(),p("li",{key:a.id},v(a.name)+" ("+v(a.email)+") - "+v(a.role),1))),128))])])):I("",!0),e.value?(y(),p("p",le,v(e.value),1)):I("",!0)])]))}};export{de as default};
