import{g as y,D as g,r as i,y as x,c as d,a,k as w,m as p,v as c,t as z,l as k,n as h,o as m}from"./DQwChrcD.js";const D={class:"p-6 max-w-xl mx-auto"},O={key:0,class:"text-red-600"},U=["disabled"],$=y({__name:"edit",setup(V){const v=g(),b=h(),u=v.params.id,n=i(""),s=i(""),t=i(""),o=i(!1);x(async()=>{o.value=!0;try{const l=await $fetch(`/api/organization/${u}`);n.value=l.name,s.value=l.description||""}catch{t.value="Failed to load organization."}finally{o.value=!1}});async function f(){o.value=!0,t.value="";try{await $fetch(`/api/organization/${u}`,{method:"PUT",body:{name:n.value,description:s.value},credentials:"include"}),b.push("/superadmin/organizations")}catch{t.value="Failed to update organization."}finally{o.value=!1}}return(l,e)=>(m(),d("div",D,[e[4]||(e[4]=a("h1",{class:"text-2xl font-bold mb-4"},"Edit Organization",-1)),a("form",{onSubmit:k(f,["prevent"]),class:"space-y-4"},[a("div",null,[e[2]||(e[2]=a("label",{class:"block font-semibold mb-1"},"Organization Name",-1)),p(a("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>n.value=r),type:"text",class:"w-full border px-3 py-2 rounded",required:""},null,512),[[c,n.value]])]),a("div",null,[e[3]||(e[3]=a("label",{class:"block font-semibold mb-1"},"Description",-1)),p(a("textarea",{"onUpdate:modelValue":e[1]||(e[1]=r=>s.value=r),class:"w-full border px-3 py-2 rounded",rows:"3"},null,512),[[c,s.value]])]),t.value?(m(),d("div",O,z(t.value),1)):w("",!0),a("button",{type:"submit",class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",disabled:o.value}," Update Organization ",8,U)],32)]))}});export{$ as default};
