import{g as I,r as g,j as S,G as U,c as t,l as x,a,k as y,m as d,v as m,A as p,F as v,x as f,t as i,o as r}from"./DQwChrcD.js";const V=["value"],F={key:0},q=["disabled"],C=["value"],P={key:1},R=["disabled"],A=["value"],B=["disabled"],O=I({__name:"UserForm",props:{availableRoles:{},organizations:{},platforms:{}},emits:["user-created"],setup(M,{emit:w}){const b=w,o=g({name:"",email:"",role:"",organizationId:"",platformId:"",password:""}),n=g(!1),k=S(),u=U(()=>{var s;return((s=k.user)==null?void 0:s.role)==="super_admin"}),c=()=>{o.value={name:"",email:"",role:"",organizationId:"",platformId:"",password:""}},z=async()=>{var s;n.value=!0;try{const e={name:o.value.name,email:o.value.email,role:o.value.role,password:o.value.password};u.value&&(e.organizationId=o.value.organizationId||null,e.platformId=o.value.platformId||null);const l=await $fetch("/api/user/create",{method:"POST",body:e});b("user-created",{success:!0,message:"User created successfully."}),c()}catch(e){const l=((s=e==null?void 0:e.data)==null?void 0:s.message)||"Failed to create user.";b("user-created",{success:!1,message:l})}finally{n.value=!1}};return(s,e)=>(r(),t("form",{onSubmit:x(z,["prevent"]),class:"space-y-6"},[a("div",null,[e[6]||(e[6]=a("label",{for:"name",class:"block font-medium text-gray-700"},"Name",-1)),d(a("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=l=>o.value.name=l),type:"text",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[m,o.value.name]])]),a("div",null,[e[7]||(e[7]=a("label",{for:"email",class:"block font-medium text-gray-700"},"Email",-1)),d(a("input",{id:"email","onUpdate:modelValue":e[1]||(e[1]=l=>o.value.email=l),type:"email",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[m,o.value.email]])]),a("div",null,[e[9]||(e[9]=a("label",{for:"role",class:"block font-medium text-gray-700"},"Role",-1)),d(a("select",{id:"role","onUpdate:modelValue":e[2]||(e[2]=l=>o.value.role=l),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[e[8]||(e[8]=a("option",{disabled:"",value:""},"Select Role",-1)),(r(!0),t(v,null,f(s.availableRoles,l=>(r(),t("option",{key:l,value:l},i(l),9,V))),128))],512),[[p,o.value.role]])]),u.value?(r(),t("div",F,[e[11]||(e[11]=a("label",{for:"organization",class:"block font-medium text-gray-700"}," Organization ",-1)),d(a("select",{id:"organization","onUpdate:modelValue":e[3]||(e[3]=l=>o.value.organizationId=l),disabled:s.organizations.length===0,class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[e[10]||(e[10]=a("option",{value:""},"-- Select Organization --",-1)),(r(!0),t(v,null,f(s.organizations,l=>(r(),t("option",{key:l.id,value:l.id},i(l.name),9,C))),128))],8,q),[[p,o.value.organizationId]])])):y("",!0),u.value?(r(),t("div",P,[e[13]||(e[13]=a("label",{for:"platform",class:"block font-medium text-gray-700"},"Platform",-1)),d(a("select",{id:"platform","onUpdate:modelValue":e[4]||(e[4]=l=>o.value.platformId=l),disabled:s.platforms.length===0,class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[e[12]||(e[12]=a("option",{value:""},"-- Select Platform --",-1)),(r(!0),t(v,null,f(s.platforms,l=>(r(),t("option",{key:l.id,value:l.id},i(l.name),9,A))),128))],8,R),[[p,o.value.platformId]])])):y("",!0),a("div",null,[e[14]||(e[14]=a("label",{for:"password",class:"block font-medium text-gray-700"},"Password",-1)),d(a("input",{id:"password","onUpdate:modelValue":e[5]||(e[5]=l=>o.value.password=l),type:"password",required:"",minlength:"6",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[m,o.value.password]])]),a("button",{type:"submit",disabled:n.value,class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition"},i(n.value?"Creating...":"Create User"),9,B)],32))}});export{O as _};
