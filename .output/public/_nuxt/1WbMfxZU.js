import{g as y,D as x,r as n,y as w,c as i,a as t,k,m as p,v as m,t as g,l as h,n as P,o as c}from"./DQwChrcD.js";const D={class:"p-6 max-w-xl mx-auto"},U={key:0,class:"text-red-600"},V=["disabled"],B=y({__name:"edit",setup(_){const f=x(),v=P(),d=f.params.id,s=n(""),r=n(""),a=n(""),l=n(!1);w(async()=>{l.value=!0;try{const o=await $fetch(`/api/platform/${d}`);s.value=o.name,r.value=o.description||""}catch{a.value="Failed to load platform."}finally{l.value=!1}});async function b(){l.value=!0,a.value="";try{await $fetch(`/api/platform/${d}`,{method:"PUT",body:{name:s.value,description:r.value},credentials:"include"}),v.push("/superadmin/platforms")}catch{a.value="Failed to update platform."}finally{l.value=!1}}return(o,e)=>(c(),i("div",D,[e[4]||(e[4]=t("h1",{class:"text-2xl font-bold mb-4"},"Edit Platform",-1)),t("form",{onSubmit:h(b,["prevent"]),class:"space-y-4"},[t("div",null,[e[2]||(e[2]=t("label",{class:"block font-semibold mb-1"},"Platform Name",-1)),p(t("input",{"onUpdate:modelValue":e[0]||(e[0]=u=>s.value=u),type:"text",class:"w-full border px-3 py-2 rounded",required:""},null,512),[[m,s.value]])]),t("div",null,[e[3]||(e[3]=t("label",{class:"block font-semibold mb-1"},"Description",-1)),p(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=u=>r.value=u),class:"w-full border px-3 py-2 rounded",rows:"3"},null,512),[[m,r.value]])]),a.value?(c(),i("div",U,g(a.value),1)):k("",!0),t("button",{type:"submit",class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",disabled:l.value}," Update Platform ",8,V)],32)]))}});export{B as default};
