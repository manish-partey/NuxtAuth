import{g as p,r as a,j as h,G as v,y as x,c,a as b,b as _,k as y,p as z,t as C,o as i}from"./DQwChrcD.js";import{_ as w}from"./CkU_MyuE.js";const k={class:"max-w-3xl mx-auto p-8 bg-white rounded-lg shadow-md"},R=p({__name:"create-user",setup(S){const t=a(""),r=a(!1),n=h(),m=a(n.roles.length>0?n.roles:["user","admin"]),s=a([]),o=a([]),u=v(()=>r.value?"text-green-700 bg-green-100 border-green-300":"text-red-700 bg-red-100 border-red-300"),d=e=>{t.value=e.message,r.value=e.success};async function f(){try{const e=await $fetch("/api/organization/list.get");s.value=e||[]}catch(e){console.error("Failed to fetch organizations:",e),s.value=[]}}async function g(){try{const e=await $fetch("/api/platform/listAdmins.get");o.value=e||[]}catch(e){console.error("Failed to fetch platforms:",e),o.value=[]}}return x(()=>{f(),g()}),(e,l)=>(i(),c("section",k,[l[0]||(l[0]=b("h1",{class:"text-4xl font-extrabold text-gray-900 mb-8 tracking-tight"}," Create User ",-1)),_(w,{availableRoles:m.value,organizations:s.value,platforms:o.value,onUserCreated:d},null,8,["availableRoles","organizations","platforms"]),t.value?(i(),c("p",{key:0,class:z([u.value,"mt-6 max-w-md rounded-md px-4 py-3 font-medium border"]),role:"alert"},C(t.value),3)):y("",!0)]))}});export{R as default};
