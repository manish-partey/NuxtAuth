import{_ as y}from"./DdLUhfTO.js";import{g as _,j as h,r as l,c as p,a as t,k,l as S,m as f,v as g,t as L,d as m,b,w as x,n as V,o as w}from"./DQwChrcD.js";const N={class:"min-h-screen flex items-center justify-center bg-gray-50 px-4"},C={class:"w-full max-w-md bg-white shadow-lg rounded-2xl p-8"},U=["disabled"],B={key:0,class:"text-red-500 text-center mt-4 text-sm font-medium"},D={class:"text-center mt-6 text-sm text-gray-600"},M={class:"mt-2"},z=_({__name:"login",setup(P){const n=h(),a=V(),r=l(""),i=l(""),o=l(""),u=l(!1),v=async()=>{o.value="",u.value=!0;try{if(await n.login(r.value,i.value)&&n.user){const e=n.user.role.toLowerCase();e==="super_admin"?await a.push("/superadmin"):e==="platform_admin"?await a.push("/platform"):e==="organization_admin"||e==="organization_admin"?await a.push("/org"):await a.push("/dashboard")}else o.value="Login failed: Unknown error."}catch(s){console.error("Login error:",s),o.value=(s==null?void 0:s.statusMessage)||"Login failed. Please check your credentials."}finally{u.value=!1}};return(s,e)=>{const c=y;return w(),p("div",N,[t("div",C,[e[7]||(e[7]=t("h1",{class:"text-3xl font-semibold text-blue-700 text-center mb-6"},"Sign In",-1)),t("form",{onSubmit:S(v,["prevent"]),class:"space-y-5"},[t("div",null,[e[2]||(e[2]=t("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email address",-1)),f(t("input",{type:"email",id:"email","onUpdate:modelValue":e[0]||(e[0]=d=>r.value=d),placeholder:"you@example.com",class:"mt-1 block w-full border border-gray-300 rounded-lg shadow-sm px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[g,r.value]])]),t("div",null,[e[3]||(e[3]=t("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Password",-1)),f(t("input",{type:"password",id:"password","onUpdate:modelValue":e[1]||(e[1]=d=>i.value=d),placeholder:"••••••••",class:"mt-1 block w-full border border-gray-300 rounded-lg shadow-sm px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[g,i.value]])]),t("button",{type:"submit",class:"w-full bg-blue-600 text-white font-semibold py-2 rounded-lg hover:bg-blue-700 transition",disabled:u.value}," Sign In ",8,U)],32),o.value?(w(),p("p",B,L(o.value),1)):k("",!0),t("div",D,[t("p",null,[e[5]||(e[5]=m(" Don't have an account? ")),b(c,{to:"/register",class:"text-blue-600 hover:underline"},{default:x(()=>e[4]||(e[4]=[m("Sign Up")])),_:1,__:[4]})]),t("p",M,[b(c,{to:"/forgot-password",class:"text-blue-600 hover:underline"},{default:x(()=>e[6]||(e[6]=[m("Forgot Password?")])),_:1,__:[6]})])])])])}}});export{z as default};
