import{_ as b}from"./CwfapDAd.js";import{r as a,C as g,D as y,c,a as s,j as m,k as h,l as w,v as p,n as P,t as k,E as _,w as N,m as C,o as i,d as R}from"./DH2D_Orl.js";const V={class:"flex justify-center items-center h-screen"},B={class:"bg-white p-8 rounded shadow-md w-full max-w-md"},M={class:"mb-4"},T={class:"mb-6"},q={class:"mt-4 text-center"},E={__name:"reset-password",setup(D){const v=y();C();const r=a(""),u=a(""),t=a(""),o=a(""),n=a("");g(()=>{n.value=v.query.token,n.value||(t.value="No reset token provided.",o.value="error")});const f=async()=>{if(t.value="",r.value!==u.value){t.value="Passwords do not match.",o.value="error";return}if(!n.value){t.value="Invalid or missing reset token.",o.value="error";return}try{const l=await $fetch("/api/auth/reset-password",{method:"POST",body:{token:n.value,newPassword:r.value}});t.value=l.message,o.value="success"}catch(l){t.value=l.statusMessage||"Password reset failed.",o.value="error"}};return(l,e)=>{const x=b;return i(),c("div",V,[s("div",B,[e[6]||(e[6]=s("h1",{class:"text-2xl font-bold mb-6 text-center"},"Reset Password",-1)),s("form",{onSubmit:h(f,["prevent"])},[s("div",M,[e[2]||(e[2]=s("label",{for:"newPassword",class:"block text-gray-700 text-sm font-bold mb-2"},"New Password:",-1)),w(s("input",{type:"password",id:"newPassword","onUpdate:modelValue":e[0]||(e[0]=d=>r.value=d),class:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",required:""},null,512),[[p,r.value]])]),s("div",T,[e[3]||(e[3]=s("label",{for:"confirmPassword",class:"block text-gray-700 text-sm font-bold mb-2"},"Confirm New Password:",-1)),w(s("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":e[1]||(e[1]=d=>u.value=d),class:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline",required:""},null,512),[[p,u.value]])]),e[4]||(e[4]=s("button",{type:"submit",class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full"}," Reset Password ",-1))],32),t.value?(i(),c("p",{key:0,class:P([o.value==="success"?"text-green-500":"text-red-500","mt-4 text-center"])},k(t.value),3)):m("",!0),s("p",q,[o.value==="success"?(i(),_(x,{key:0,to:"/login",class:"text-blue-500 hover:underline"},{default:N(()=>e[5]||(e[5]=[R("Go to Login")])),_:1,__:[5]})):m("",!0)])])])}}};export{E as default};
