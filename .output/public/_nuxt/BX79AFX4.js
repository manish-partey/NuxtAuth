import{_ as y}from"./DdLUhfTO.js";import{g as h,j as v,r as x,y as w,c as a,a as e,z as g,d as i,t as r,b as p,w as _,k as f,F as k,x as C,o,p as N}from"./DQwChrcD.js";const U={class:"max-w-6xl mx-auto py-10 px-4"},V={class:"mb-8"},F={key:0,class:"text-gray-700"},A={class:"font-medium"},j={key:1,class:"text-gray-500 italic"},B={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-10"},L={class:"bg-white rounded-xl shadow-md p-6"},M={key:0,class:"mt-4"},S={class:"divide-y divide-gray-200"},z={class:"font-semibold text-gray-800"},D={class:"text-sm text-gray-600"},E={key:1,class:"text-gray-500 mt-4"},T={key:2,class:"text-red-600 mt-4"},Q=h({__name:"index",setup(I){const l=v(),m=x([]),d=x(""),c=x(!1),b=async()=>{d.value="",c.value=!0;try{const n=await $fetch("/api/user/list");m.value=n}catch(n){d.value=(n==null?void 0:n.statusMessage)||"Failed to fetch users."}finally{c.value=!1}};return w(async()=>{!l.user&&!l.loading&&await l.fetchUser()}),(n,s)=>{const u=y;return o(),a("div",U,[e("div",V,[s[1]||(s[1]=e("h1",{class:"text-4xl font-semibold text-gray-800 mb-2"},"Admin Dashboard",-1)),g(l).user?(o(),a("p",F,[s[0]||(s[0]=i(" Welcome, ")),e("span",A,r(g(l).user.name),1),i(" ("+r(g(l).user.role)+") ",1)])):(o(),a("p",j,"Loading admin data..."))]),e("div",B,[p(u,{to:"/admin/users",class:"bg-white border hover:shadow-md transition rounded-xl p-5"},{default:_(()=>s[2]||(s[2]=[e("h2",{class:"text-xl font-semibold mb-2"},"Users",-1),e("p",{class:"text-sm text-gray-600"},"View and manage all users across platforms.",-1)])),_:1,__:[2]}),p(u,{to:"/admin/platforms",class:"bg-white border hover:shadow-md transition rounded-xl p-5"},{default:_(()=>s[3]||(s[3]=[e("h2",{class:"text-xl font-semibold mb-2"},"Platforms",-1),e("p",{class:"text-sm text-gray-600"},"Review all registered platforms and their admins.",-1)])),_:1,__:[3]}),p(u,{to:"/admin/invites",class:"bg-white border hover:shadow-md transition rounded-xl p-5"},{default:_(()=>s[4]||(s[4]=[e("h2",{class:"text-xl font-semibold mb-2"},"Invites",-1),e("p",{class:"text-sm text-gray-600"},"Track invitation status for users.",-1)])),_:1,__:[4]})]),e("div",L,[e("div",{class:"flex items-center justify-between mb-4"},[s[5]||(s[5]=e("h2",{class:"text-2xl font-semibold text-gray-800"},"Manage Users (Quick View)",-1)),e("button",{onClick:b,class:"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg transition"}," Fetch All Users ")]),s[6]||(s[6]=e("p",{class:"text-gray-600 mb-4"},[i(" Only visible to roles: "),e("code",{class:"bg-gray-100 px-1 rounded"},"super_admin"),i(" or "),e("code",{class:"bg-gray-100 px-1 rounded"},"platform_admin"),i(". ")],-1)),m.value.length?(o(),a("div",M,[e("ul",S,[(o(!0),a(k,null,C(m.value,t=>(o(),a("li",{key:t._id,class:"py-2 flex justify-between items-center"},[e("div",null,[e("p",z,r(t.name),1),e("p",D,r(t.email),1)]),e("span",{class:N(["inline-block px-3 py-1 text-xs font-medium rounded-full",{"bg-blue-100 text-blue-800":t.role==="admin","bg-gray-100 text-gray-700":t.role==="user","bg-green-100 text-green-700":t.role==="super_admin"||t.role==="platform_admin"}])},r(t.role),3)]))),128))])])):c.value?f("",!0):(o(),a("p",E,'No users found. Click "Fetch All Users" to load data.')),d.value?(o(),a("p",T,r(d.value),1)):f("",!0)])])}}});export{Q as default};
