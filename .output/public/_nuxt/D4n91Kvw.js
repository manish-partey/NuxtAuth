import{g as y,r as u,y as _,c as r,a as e,k as c,t as a,F as h,x as f,o as s}from"./DQwChrcD.js";const m={class:"p-6"},x={key:0,class:"text-gray-500"},k={key:1,class:"text-red-600"},w={key:2,class:"w-full border-collapse border border-gray-300"},C={class:"border border-gray-300 p-2"},I={class:"border border-gray-300 p-2 capitalize"},F={class:"border border-gray-300 p-2"},N={class:"border border-gray-300 p-2"},S={class:"border border-gray-300 p-2 capitalize"},$={class:"border border-gray-300 p-2"},z={class:"border border-gray-300 p-2 text-center space-x-2"},A=["onClick"],B=["onClick"],D={key:3,class:"text-gray-500"},P=y({__name:"invites",setup(L){const n=u([]),l=u(!1),d=u("");async function b(){l.value=!0,d.value="";try{n.value=await $fetch("/api/org/invites.get",{credentials:"include"})}catch{d.value="Failed to load invites."}finally{l.value=!1}}async function g(i){try{await $fetch("/api/org/invite/revoke.post",{method:"POST",body:{inviteId:i},credentials:"include"}),await b()}catch{alert("Failed to revoke invite.")}}async function p(i){try{await $fetch("/api/org/invite/resend.post",{method:"POST",body:{inviteId:i},credentials:"include"}),alert("Invite resent successfully.")}catch{alert("Failed to resend invite.")}}return _(b),(i,o)=>(s(),r("div",m,[o[1]||(o[1]=e("h1",{class:"text-2xl font-bold mb-4"},"Manage Invitations",-1)),o[2]||(o[2]=e("p",{class:"mb-6 text-gray-600"},"View all pending or active invitations across platforms and organizations.",-1)),l.value?(s(),r("div",x,"Loading invites...")):c("",!0),d.value?(s(),r("div",k,a(d.value),1)):c("",!0),!l.value&&n.value.length?(s(),r("table",w,[o[0]||(o[0]=e("thead",null,[e("tr",{class:"bg-gray-100"},[e("th",{class:"border border-gray-300 p-2 text-left"},"Email"),e("th",{class:"border border-gray-300 p-2 text-left"},"Role"),e("th",{class:"border border-gray-300 p-2 text-left"},"Organization"),e("th",{class:"border border-gray-300 p-2 text-left"},"Platform"),e("th",{class:"border border-gray-300 p-2 text-left"},"Status"),e("th",{class:"border border-gray-300 p-2 text-left"},"Created At"),e("th",{class:"border border-gray-300 p-2 text-center"},"Actions")])],-1)),e("tbody",null,[(s(!0),r(h,null,f(n.value,t=>(s(),r("tr",{key:t._id},[e("td",C,a(t.email),1),e("td",I,a(t.role.replace(/_/g," ")),1),e("td",F,a(t.orgName),1),e("td",N,a(t.platformName),1),e("td",S,a(t.status),1),e("td",$,a(new Date(t.createdAt).toLocaleDateString()),1),e("td",z,[e("button",{onClick:v=>p(t._id),class:"text-blue-600 hover:underline"},"Resend",8,A),e("button",{onClick:v=>g(t._id),class:"text-red-600 hover:underline"},"Revoke",8,B)])]))),128))])])):c("",!0),!l.value&&!n.value.length?(s(),r("div",D,"No active invites.")):c("",!0)]))}});export{P as default};
